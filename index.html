<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DashControl Enterprise Premium</title>

  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { margin:0; font-family:'Poppins', sans-serif; background:#0d0d0d; color:white; }
    header { background:linear-gradient(90deg,#8e44ad,#b8860b); padding:15px; font-size:22px; font-weight:700; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,.5); }
    nav { display:flex; justify-content:center; gap:10px; background:#1e1e1e; padding:10px; flex-wrap:wrap; }
    nav button { background:#8e44ad; border:none; padding:10px 15px; color:white; border-radius:8px; cursor:pointer; font-weight:600; display:flex; align-items:center; gap:5px; }
    nav button:hover { background:#b8860b; }

    .page { display:none; padding:20px; max-width:1200px; margin:auto; }
    h2 { color:#d4af37; margin:20px 0; font-weight:700; font-size:22px; }

    /* Splash */
    .splash { position:fixed; top:0; left:0; width:100%; height:100%; 
      background:linear-gradient(135deg,#0d0d0d,#8e44ad,#b8860b); 
      display:flex; align-items:center; justify-content:center; flex-direction:column; 
      color:#fff; font-size:42px; font-weight:bold; z-index:9999; text-align:center; animation:fadeIn 1.5s; }
    .splash small { color:#ddd; margin-top:10px; font-size:18px; }
    @keyframes fadeIn { from{opacity:0} to{opacity:1} }

    /* Formul√°rio */
    form { max-width:600px; margin:auto; text-align:left; }
    label { display:block; margin:10px 0 5px; font-weight:600; color:#d4af37; }
    input, select { padding:10px; border-radius:6px; border:none; width:100%; background:#2c2c2c; color:white; font-size:14px; }
    button.action { background:#8e44ad; padding:12px; margin:10px 5px; border:none; border-radius:8px; color:white; font-weight:bold; cursor:pointer; }
    button.action:hover { background:#b8860b; }

    /* Dashboard */
    .chart-card { background:#1a1a1a; border-radius:12px; padding:15px; margin:20px auto; box-shadow:0 4px 20px rgba(0,0,0,0.6); }
    .chart { width:100%; height:400px; }

    /* KPIs */
    .kpis { display:flex; justify-content:space-around; flex-wrap:wrap; gap:20px; }
    .kpi { flex:1; min-width:180px; background:#1a1a1a; padding:20px; border-radius:10px; text-align:center; font-size:18px; font-weight:bold; }
    .kpi.green { border:2px solid #2ecc71; }
    .kpi.red { border:2px solid #e74c3c; }
    .kpi.yellow { border:2px solid #f1c40f; }

    /* Toast */
    #toast { visibility:hidden; min-width:250px; margin-left:-125px; background:#333; color:#fff; text-align:center; border-radius:4px; padding:12px; position:fixed; z-index:10000; left:50%; bottom:30px; font-size:14px; }
    #toast.show { visibility:visible; animation:fadein 0.5s, fadeout 0.5s 2.5s; }
    @keyframes fadein { from{bottom:0;opacity:0} to{bottom:30px;opacity:1} }
    @keyframes fadeout { from{bottom:30px;opacity:1} to{bottom:0;opacity:0} }
  </style>
</head>
<body>

  <!-- Splash -->
  <div id="splash" class="splash">
    üöÄ DashControl Enterprise <br>
    <small>O BI que se adapta ao seu neg√≥cio</small>
  </div>

  <!-- Cabe√ßalho -->
  <header>üìä DashControl Enterprise Premium</header>
  <nav>
    <button onclick="showPage('dados')">‚öôÔ∏è Dados</button>
    <button onclick="showPage('dashboard')">üìà Dashboard</button>
  </nav>

  <!-- Dados -->
  <div id="dados" class="page">
    <h2>üì¶ Inser√ß√£o de Dados</h2>
    <form id="formDados">
      <label>Produto/Servi√ßo:</label>
      <input type="text" id="nomeProduto" required>

      <label>Valor Compra (R$):</label>
      <input type="number" id="valorCompra" required>

      <label>Valor Venda (R$):</label>
      <input type="number" id="valorVenda" required>

      <label>Quantidade (deixe vazio se for servi√ßo):</label>
      <input type="number" id="estoqueProduto">

      <label>Forma de Pagamento:</label>
      <select id="formaPagamento">
        <option>Pix</option>
        <option>D√©bito</option>
        <option>Cr√©dito</option>
        <option>Dinheiro</option>
      </select>

      <label>Data:</label>
      <input type="date" id="dataProduto" required>

      <button type="button" class="action" onclick="adicionarProduto()">‚ûï Adicionar</button>
      <button type="button" class="action" onclick="limparDados()">üóëÔ∏è Limpar Dados</button>
    </form>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="page">
    <h2>Dashboard Premium</h2>
    <div class="kpis">
      <div class="kpi green" id="kpiReceita">Receita: R$ 0</div>
      <div class="kpi yellow" id="kpiLucro">Lucro: R$ 0</div>
      <div class="kpi red" id="kpiSaidas">Sa√≠das: R$ 0</div>
    </div>
    <div class="chart-card"><div id="chartReceita" class="chart"></div></div>
    <div class="chart-card"><div id="chartLucro" class="chart"></div></div>
    <div class="chart-card"><div id="chartEstoque" class="chart"></div></div>
    <div class="chart-card"><div id="chartABC" class="chart"></div></div>
    <div class="chart-card"><div id="chartLinha" class="chart"></div></div>
  </div>

  <div id="toast"></div>

<script>
  // Splash
  setTimeout(()=>{ document.getElementById('splash').style.display='none'; showPage('dados'); },2000);

  // Navega√ß√£o
  function showPage(id){
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');
    document.getElementById(id).style.display='block';
    if(id==='dashboard') atualizarDashboard();
  }

  // Toast
  function showToast(msg){
    let x=document.getElementById("toast");
    x.innerText=msg;
    x.className="show";
    setTimeout(()=>{ x.className=x.className.replace("show",""); },3000);
  }

  // Dados
  let dados = JSON.parse(localStorage.getItem("dashEnterprise")) || [];

  function adicionarProduto(){
    let nome=document.getElementById('nomeProduto').value;
    let compra=parseFloat(document.getElementById('valorCompra').value)||0;
    let venda=parseFloat(document.getElementById('valorVenda').value)||0;
    let qtd=parseInt(document.getElementById('estoqueProduto').value)||0;
    let forma=document.getElementById('formaPagamento').value;
    let data=document.getElementById('dataProduto').value;

    if(!nome || !data) return showToast("‚ö†Ô∏è Preencha todos os campos obrigat√≥rios!");

    dados.push({nome, compra, venda, qtd, forma, data});
    localStorage.setItem("dashEnterprise", JSON.stringify(dados));
    document.getElementById('formDados').reset();
    showToast("‚úÖ Produto/Venda adicionado!");
  }

  function limparDados(){
    dados=[]; localStorage.removeItem("dashEnterprise");
    showToast("üóëÔ∏è Dados apagados!");
  }

  // Dashboard
  function atualizarDashboard(){
    if(dados.length===0){ showToast("Nenhum dado cadastrado!"); return; }

    let receitaTotal = dados.reduce((s,p)=>s+p.venda,0);
    let lucroTotal = dados.reduce((s,p)=>s+(p.venda-p.compra),0);
    let saidas = dados.reduce((s,p)=>s+p.compra,0);

    document.getElementById("kpiReceita").innerText="Receita: R$ "+receitaTotal.toFixed(2);
    document.getElementById("kpiLucro").innerText="Lucro: R$ "+lucroTotal.toFixed(2);
    document.getElementById("kpiSaidas").innerText="Sa√≠das: R$ "+saidas.toFixed(2);

    // Receita por Produto
    let chartReceita=echarts.init(document.getElementById('chartReceita'));
    chartReceita.setOption({
      title:{text:"üí∞ Receita por Produto", textStyle:{color:'#d4af37'}},
      xAxis:{type:'category', data:dados.map(p=>p.nome), axisLabel:{color:'#fff'}},
      yAxis:{type:'value', axisLabel:{color:'#fff'}},
      series:[{data:dados.map(p=>p.venda), type:'bar', itemStyle:{color:'#8e44ad'}}]
    });

    // Lucro x Receita
    let chartLucro=echarts.init(document.getElementById('chartLucro'));
    chartLucro.setOption({
      title:{text:"üìä Receita x Lucro", textStyle:{color:'#d4af37'}},
      legend:{data:['Receita','Lucro'], textStyle:{color:'#fff'}},
      xAxis:{type:'category', data:dados.map(p=>p.nome), axisLabel:{color:'#fff'}},
      yAxis:{type:'value', axisLabel:{color:'#fff'}},
      series:[
        {name:'Receita', data:dados.map(p=>p.venda), type:'bar', itemStyle:{color:'#3498db'}},
        {name:'Lucro', data:dados.map(p=>p.venda-p.compra), type:'bar', itemStyle:{color:'#2ecc71'}}
      ]
    });

    // Giro de Estoque
    let chartEstoque=echarts.init(document.getElementById('chartEstoque'));
    chartEstoque.setOption({
      title:{text:"üì¶ Giro de Estoque", textStyle:{color:'#d4af37'}},
      xAxis:{type:'category', data:dados.map(p=>p.nome), axisLabel:{color:'#fff'}},
      yAxis:{type:'value', axisLabel:{color:'#fff'}},
      series:[{data:dados.map(p=>p.qtd), type:'bar', itemStyle:{color:'#f1c40f'}}]
    });

    // Curva ABC
    let sorted=dados.sort((a,b)=>b.venda-a.venda);
    let top=sorted.slice(0,5);
    let chartABC=echarts.init(document.getElementById('chartABC'));
    chartABC.setOption({
      title:{text:"üîù Curva ABC (Top 5)", textStyle:{color:'#d4af37'}},
      series:[{type:'pie', radius:['40%','70%'], data:top.map(p=>({name:p.nome,value:p.venda})),
        label:{color:'#fff'}}]
    });

    // Receita no tempo
    let porData={}; dados.forEach(p=>{ porData[p.data]=(porData[p.data]||0)+p.venda; });
    let datas=Object.keys(porData).sort(); let valores=Object.values(porData);
    let chartLinha=echarts.init(document.getElementById('chartLinha'));
    chartLinha.setOption({
      title:{text:"üìà Receita no Tempo", textStyle:{color:'#d4af37'}},
      xAxis:{type:'category', data:datas, axisLabel:{color:'#fff'}},
      yAxis:{type:'value', axisLabel:{color:'#fff'}},
      series:[{data:valores, type:'line', smooth:true, itemStyle:{color:'#1abc9c'}, areaStyle:{}}]
    });
  }
</script>

</body>
</html>